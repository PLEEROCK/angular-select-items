!function(){"use strict";angular.module("selectItems",["selectOptions","disableAll","ngSanitize"])}(),angular.module("selectItems").run(["$templateCache",function(e){e.put("select-items.html",'<div class="select-items"\n     ng-show="search\n            || (loadingInProgress && loadingLabel)\n            || (multiselect && selectAll && getDisplayedItems().length > 0)\n            || (!multiselect && !autoSelect && !hideNoSelection && noSelectionLabel)\n            || getDisplayedItems().length > 0"\n        disable-all="disabled">\n    <ul>\n        <li ng-show="loadingInProgress" class="select-list-item">{{ loadingLabel }}</li>\n        <li ng-show="search && !loadingInProgress" class="select-items-search select-list-item">\n            <input ng-model="searchKeyword" ng-attr-placeholder="{{ searchPlaceholder }}">\n        </li>\n        <li class="select-all select-list-item"\n            ng-class="{ \'can-be-active\' : activeItem === null }"\n            ng-show="multiselect && selectAll && getDisplayedItems().length > 0"\n            ng-mouseover="setActiveItem(null)"\n            ng-click="toggleAllItemsSelection()">\n            <input ng-show="!hideControls" type="checkbox" ng-checked="areAllItemsSelected()">\n            <span class="select-all">{{ areAllItemsSelected() ? deselectAllLabel : selectAllLabel }}</span>\n        </li>\n        <li ng-show="!multiselect && !autoSelect && !hideNoSelection && noSelectionLabel"\n            ng-click="selectItem()"\n            ng-mouseover="setActiveItem(null)"\n            ng-class="{ \'active\' : !activeItem }"\n            class="no-selection select-list-item">\n            <input ng-show="!hideControls" type="radio" ng-checked="!isAnyItemSelected()"> {{ noSelectionLabel }}\n        </li>\n        <li ng-repeat="item in getDisplayedItems()"\n            class="select-item">\n            <div class="select-item-container">\n                <div class="select-list-item select-items-group"\n                     ng-class="{ \'all-selected\': areAllGroupItemsSelected(item), \'select-all-enabled\': groupSelectAll }"\n                     ng-mouseover="setActiveItem(null)"\n                     ng-show="($index === 0 || getItemGroup(item) !== getItemGroupOfItemsAt($index - 1)) && getItemGroup(item)"\n                     ng-click="toggleGroupItemsSelection(item)">\n                    <input class="item-control"\n                           ng-show="groupSelectAll"\n                           type="checkbox"\n                           ng-checked="areAllGroupItemsSelected(item)">\n                    <span class="select-item-group-template" ng-bind-html="getItemGroup(item)"></span>\n                </div>\n                <div class="select-list-item"\n                     ng-mouseover="setActiveItem(item)"\n                     ng-click="selectItem(item)"\n                     ng-class="{ \'active\' : activeItem === item, \'selected\': isItemSelected(item) }">\n                    <input class="item-control"\n                           ng-show="!hideControls"\n                           ng-attr-type="{{ multiselect ? \'checkbox\' : \'radio\' }}"\n                           ng-disabled="selectionLimit > 0 && ngModel.length >= selectionLimit && !isItemSelected(item)"\n                           ng-checked="isItemSelected(item)">\n                    <span class="select-item-template" ng-bind-html="getItemName(item)"></span>\n                </div>\n            </div>\n        </li>\n    </ul>\n</div>')}]),function(){"use strict";function e(){return function(e,l){return l?e.replace(new RegExp("("+t(l)+")","ig"),'<span class="highlighted">$1</span>'):e}}function t(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}angular.module("selectItems").filter("selectItemsHighlightWord",e)}(),function(){"use strict";angular.module("selectItems").constant("selectItemsConfiguration",{searchPlaceholder:"Type to search",selectAllLabel:"Select all",deselectAllLabel:"Deselect all",noSelectionLabel:"Nothing is selected",loadingLabel:"",loadMinQueryLength:3,loadDelay:300,showLimit:null})}(),function(){"use strict";function e(e,t,l,n,i,s,c){return{scope:{ngModel:"=",disabled:"=?",multiselect:"=?",showLimit:"=?",selectionLimit:"=?",search:"=?",searchFilter:"=?",searchKeyword:"=?",autoSelect:"=?",selectAll:"=?",groupSelectAll:"=?",hideControls:"=?",hideNoSelection:"=?",searchPlaceholder:"@",selectAllLabel:"@",deselectAllLabel:"@",noSelectionLabel:"@",loadingLabel:"@",loadPromise:"=?",loadByKeywordPromise:"=?",loadByKeywordDelay:"=?",loadByKeywordMinQueryLength:"@",filters:"=?",decorator:"=?",groupDecorator:"=?",activeItem:"=?",modelInsertPosition:"=?"},replace:!0,restrict:"E",require:["ngModel","selectOptions"],template:function(e){var l=e.html().trim();return l?'<div class="select-items">'+l+"</div>":t.get("select-items.html")},link:function(t,o,a,r){t.showLimit=t.showLimit?parseInt(t.showLimit):l.showLimit,t.searchPlaceholder=t.searchPlaceholder||l.searchPlaceholder,t.selectAllLabel=t.selectAllLabel||l.selectAllLabel,t.deselectAllLabel=t.deselectAllLabel||l.deselectAllLabel,t.noSelectionLabel=t.noSelectionLabel||l.noSelectionLabel,t.loadingLabel=t.loadingLabel||l.loadingLabel,t.loadByKeywordMinQueryLength=a.loadByKeywordMinQueryLength?parseInt(a.loadByKeywordMinQueryLength):l.loadMinQueryLength,t.loadByKeywordDelay=t.loadByKeywordDelay?parseInt(a.loadByKeywordDelay):l.loadByKeywordDelay;var m=r[0],u=r[1],d=null,g=[],I=function(e,l){t.loadingInProgress=!0,g=[],e(l).then(function(e){e.data&&angular.isArray(e.data)&&(g=e.data),t.loadingInProgress=!1},function(e){throw t.loadingInProgress=!1,e})};if(t.getItemGroup=function(e){var l=u.parseItemGroup(e);return l&&(l=String(l).replace(/<[^>]+>/gm,"")),t.groupDecorator?t.groupDecorator(e):l},t.getItemGroupOfItemsAt=function(e){return t.getItemGroup(t.getDisplayedItems()[e])},t.getItemName=function(e){var l=u.parseItemName(e);return l=String(l).replace(/<[^>]+>/gm,""),t.decorator?t.decorator(e):c(l,t.searchKeyword)},t.getItems=function(){var e=u.parseItems()||[];return g.length>0&&(e=e.concat(g)),t.filters&&angular.forEach(t.filters,function(t){e=t(e)}),t.showLimit&&e.length>t.showLimit&&(e=e.slice(0,t.showLimit)),e},t.getDisplayedItems=function(){var e=t.getItems();return t.searchKeyword&&(e=s(e,t.searchKeyword,t.searchFilter)),u.getOrderBy()&&(e=i(e,u.getOrderBy())),u.getGroupBy()&&(e=i(e,u.getGroupByWithoutPrefixes())),e},t.isItemSelected=function(e){var l=m.$modelValue,n=u.parseItemValue(e),i=u.getTrackBy(),s=u.parseTrackBy(e);if(!i||!s)return t.multiselect?l&&-1!==l.indexOf(n):l===n;if(t.multiselect){var c=!1;return angular.forEach(l,function(e){e[i]===s&&(c=!0)}),c}return l[i]===s},t.areAllGroupItemsSelected=function(e){if(t.multiselect){var l=t.getDisplayedItems(),n=t.getItemGroup(e),i=!1;return angular.forEach(l,function(e){n===t.getItemGroup(e)&&(i=i||!t.isItemSelected(e))}),i===!1}},t.isAnyItemSelected=function(){return t.multiselect?m.$modelValue&&m.$modelValue.length>0:m.$modelValue?!0:!1},t.areAllItemsSelected=function(){var e=t.getDisplayedItems(),l=!1;return angular.forEach(e,function(e){l=l||!t.isItemSelected(e)}),l===!1},t.selectItem=function(l){var n=u.parseItemValue(l),i=!1,s=null,c=n;if(t.multiselect)if(c=m.$modelValue||[],t.isItemSelected(l)||null===n){var o=u.findItemInModel(l,c);c.splice(c.indexOf(o),1)}else{if(c.length>=t.selectionLimit)return;angular.isDefined(t.modelInsertPosition)?c.splice(t.modelInsertPosition,0,n):c.push(n),s=t.modelInsertPosition,i=!0}m.$setViewValue(c),a.onChange&&e(function(){u.applyOnScope(a.onChange)});var r={item:l,isMultiselect:t.multiselect,isNewSelection:i,index:s};t.$emit("select-items.item_selected",r)},t.selectAllItems=function(){if(t.multiselect){var e=t.getDisplayedItems();angular.forEach(e,function(e){t.isItemSelected(e)||t.selectItem(e)})}},t.deselectAllItems=function(){if(t.multiselect){var e=t.getDisplayedItems();angular.forEach(e,function(e){t.isItemSelected(e)&&t.selectItem(e)})}},t.toggleAllItemsSelection=function(){t.areAllItemsSelected()?t.deselectAllItems():t.selectAllItems()},t.selectGroupItems=function(e){if(t.multiselect&&t.groupSelectAll){var l=t.getItemGroup(e),n=t.getDisplayedItems();angular.forEach(n,function(e){l!==t.getItemGroup(e)||t.isItemSelected(e)||t.selectItem(e)})}},t.deselectGroupItems=function(e){if(t.multiselect&&t.groupSelectAll){var l=t.getItemGroup(e),n=t.getDisplayedItems();angular.forEach(n,function(e){l===t.getItemGroup(e)&&t.isItemSelected(e)&&t.selectItem(e)})}},t.toggleGroupItemsSelection=function(e){t.multiselect&&t.groupSelectAll&&(t.areAllGroupItemsSelected(e)?t.deselectGroupItems(e):t.selectGroupItems(e))},t.setActiveItem=function(e){t.activeItem=e},t.loadByKeywordPromise&&t.$watch("searchKeyword",function(l){t.loadByKeywordPromise&&l&&l.length>=t.loadByKeywordMinQueryLength&&(null!==d&&e.cancel(d),d=e(function(){I(t.loadByKeywordPromise,l)},t.loadByKeywordDelay))}),t.$on("select-items.active_next",function(){var e=n.previous(t.getDisplayedItems(),t.activeItem);(e||!t.multiselect)&&(t.activeItem=e)}),t.$on("select-items.active_previous",function(){t.activeItem=n.next(t.getDisplayedItems(),t.activeItem)}),t.$on("select-items.select_active",function(e){var l=t.getDisplayedItems();l.length>0&&-1!==l.indexOf(t.activeItem)?(t.selectItem(t.activeItem),e.isItemSelected=!0):e.isItemSelected=!1}),t.$on("$destroy",function(){d&&e.cancel(d)}),t.autoSelect){var h=t.getDisplayedItems();h.length>0&&t.selectItem(h[0])}t.$watch("loadPromise",function(e){e&&I(e)})}}}angular.module("selectItems").directive("selectItems",e),e.$inject=["$timeout","$templateCache","selectItemsConfiguration","SelectItemsActiveItemNavigator","orderByFilter","filterFilter","selectItemsHighlightWordFilter"]}(),function(){"use strict";function e(){return{previous:function(e,t){if(!e||0===e.length)return null;var l=e.indexOf(t);return l>0&&e[l-1]?e[l-1]:e[0]},next:function(e,t){if(!e||0===e.length)return null;if(!t)return e[0];var l=e.indexOf(t);return t&&l>-1&&e[l+1]?e[l+1]:-1===l?e[0]:t}}}angular.module("selectItems").factory("SelectItemsActiveItemNavigator",e)}();